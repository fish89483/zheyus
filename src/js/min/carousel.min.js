var prevIndex,nextIndex,hTopIndex,hBottomIndex,startY,endY,itemList=[["title 1","",""],["聖示宮祖號","t2.jpg","2Lorem ipsum dolor sit amet consectetur adipisicing elit. Nulla nam minus quae odio? Voluptates corrupti dolorum recusandae, non facilis molestiae ipsa, laborum expedita praesentium tempore soluta quam iste neque nam."],["title 3","t3.jpg","3Lorem ipsum dolor sit amet consectetur adipisicing elit. Nulla nam minus quae odio? Voluptates corrupti dolorum recusandae, non facilis molestiae ipsa, laborum expedita praesentium tempore soluta quam iste neque nam.Lorem ipsum dolor sit amet consectetur adipisicing elit. Nulla nam minus quae odio? Voluptates corrupti dolorum recusandae, non facilis molestiae ipsa, laborum expedita praesentium tempore soluta quam iste neque nam."],["title 4","t4.jpg","4Lorem ipsum dolor sit amet consectetur adipisicing elit. Nulla nam minus quae odio? Voluptates corrupti dolorum recusandae, non facilis molestiae ipsa, laborum expedita praesentium tempore soluta quam iste neque nam.Lorem ipsum dolor sit amet consectetur adipisicing elit. Nulla nam minus quae odio? Voluptates corrupti dolorum recusandae, non facilis molestiae ipsa, laborum expedita praesentium tempore soluta quam iste neque nam.Lorem ipsum dolor sit amet consectetur adipisicing elit. Nulla nam minus quae odio? Voluptates corrupti dolorum recusandae, non facilis molestiae ipsa, laborum expedita praesentium tempore soluta quam iste neque nam."],["title 5","t5.jpg","5Lorem ipsum dolor sit amet consectetur adipisicing elit. Nulla nam minus quae odio? Voluptates corrupti dolorum recusandae, non facilis molestiae ipsa, laborum expedita praesentium tempore soluta quam iste neque nam.Lorem ipsum dolor sit amet consectetur adipisicing elit. Nulla nam minus quae odio? Voluptates corrupti dolorum recusandae, non facilis molestiae ipsa, laborum expedita praesentium tempore soluta quam iste neque nam.Lorem ipsum dolor sit amet consectetur adipisicing elit. Nulla nam minus quae odio? Voluptates corrupti dolorum recusandae, non facilis molestiae ipsa, laborum expedita praesentium tempore soluta quam iste neque nam.Lorem ipsum dolor sit amet consectetur adipisicing elit. Nulla nam minus quae odio? Voluptates corrupti dolorum recusandae, non facilis molestiae ipsa, laborum expedita praesentium tempore soluta quam iste neque nam."]],$item=$(".o-carousel__item"),$itemTop=$(".o-carousel__item.-top"),$itemCenter=$(".o-carousel__item.-center"),$itemBottom=$(".o-carousel__item.-bottom"),$hideTop=$(".o-carousel__item.-hide-top"),$hideBottom=$(".o-carousel__item.-hide-bottom"),$itemCountTxt=$(".o-carousel__count"),itemLen=itemList.length,time_MOVE=500,isMove=!0,isActive_KV=!0,currentIndex=0;function move(e){if(isMove){switch(isMove=!1,e){case"next":itemLen<=(currentIndex+=1)&&(currentIndex=0);break;case"prev":(currentIndex-=1)<0&&(currentIndex=itemLen-1)}$item.addClass("-stop -"+e),$item.offset(),$item.removeClass("-stop"),$item.addClass("-start"),$item.removeClass("-animate"),setTimeout(function(){$item.removeClass("-start -"+e),$item.addClass("-animate"),isMove=!0},time_MOVE),$itemCountTxt.html(currentIndex+1+" / "+itemLen),countIndex(),updateTxt(),setTimeout(function(){setCarouselActive(),updateContent()},time_MOVE)}}function countIndex(){nextIndex=currentIndex+1,(prevIndex=currentIndex-1)<0&&(prevIndex=itemLen-1),itemLen-1<=currentIndex&&(nextIndex=0),(hTopIndex=prevIndex-1)<0&&(hTopIndex=itemLen-1),itemLen<=(hBottomIndex=nextIndex+1)&&(hBottomIndex=0)}function updateTxt(){$hideTop.find(".m-carousel__title").html(itemList[hTopIndex][0]),$hideBottom.find(".m-carousel__title").html(itemList[hBottomIndex][0]),$itemCenter.find(".m-carousel__title").html(itemList[currentIndex][0]),$itemTop.find(".m-carousel__title").html(itemList[prevIndex][0]),$itemBottom.find(".m-carousel__title").html(itemList[nextIndex][0]),$hideTop.find(".m-carousel__txt").html(itemList[hTopIndex][2]),$hideBottom.find(".m-carousel__txt").html(itemList[hBottomIndex][2]),$itemCenter.find(".m-carousel__txt").html(itemList[currentIndex][2]),$itemTop.find(".m-carousel__txt").html(itemList[prevIndex][2]),$itemBottom.find(".m-carousel__txt").html(itemList[nextIndex][2])}function updateContent(){$hideTop.find(".m-carousel__item").css("background-image","url(images/"+itemList[hTopIndex][1]+")"),$hideBottom.find(".m-carousel__item").css("background-image","url(images/"+itemList[hBottomIndex][1]+")"),$itemTop.find(".m-carousel__item").css("background-image","url(images/"+itemList[prevIndex][1]+")"),$itemCenter.find(".m-carousel__item").css("background-image","url(images/"+itemList[currentIndex][1]+")"),$itemBottom.find(".m-carousel__item").css("background-image","url(images/"+itemList[nextIndex][1]+")")}function setCarouselActive(){isActive_KV=0==currentIndex?($("#js-kv").addClass("-active"),$itemCenter.find(".m-carousel__item").hide(),!0):($itemCenter.find(".m-carousel__item").show(),$("#js-kv").removeClass("-active"),!1)}function setCarouselOffset(){var e=$(window).outerHeight();$hideTop.css("margin-top",(.5*e*itemLen-e)/2*-1+"px")}$(window).on("mousewheel",function(e){move(e.deltaY<0?"next":"prev")}),$(window).on("touchstart",function(e){startY=e.touches[0].clientY}),$(window).on("touchmove",function(e){endY=e.touches[0].clientY}),$(window).on("touchend",function(e){var t=startY-endY;t(100<t||t<-100?"next":"prev")}),$(function(){setCarouselOffset(),countIndex(),updateTxt(),updateContent(),setCarouselActive(),setTimeout(function(){$item.addClass("-animate")},time_MOVE)}),$(window).resize(function(){setCarouselOffset()});